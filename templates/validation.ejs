import * as Joi from "@hapi/joi";
import {Schema} from "express-validator";

// GET /v1/<%- entityLowercase %>
<% if (options.read) { %>
export const list<%- entityCapitalize %>s : Schema = {
    //for custom list route
};
<% } %>

<% if (options.read) { %>
// GET /v1/<%- entityLowercase %>s/<%- entityLowercase %>Id
export const get<%- entityCapitalize %> : Schema = {
    id : {
            in: ['params'],
            errorMessage: 'Please provide a valid id',
            isInt: true
        }
    };
<% } %>

<% if (options.create) { %>
// POST /v1/<%- entityLowercase %>s
export const create<%- entityCapitalize %> : Schema = {
<% validation.forEach(col => { -%>
    <%- col.name %> : <%- stringifyObject(buildValidationArgumentsFromObject(col.baseColumn)) %>,
<% }); %>
};
<% } %>

// PUT /v1/<%- entityLowercase %>s/:Id
<% if (options.update) { %>
export const replace<%- entityCapitalize %> : Schema =  {
    ...exports.get,
    ...exports.create
};
<% } %>

<% if (options.update) { %>
// PATCH /v1/<%- entityLowercase %>s/:Id
export const update<%- entityCapitalize %> : Schema =  {
    ...exports.get,
    ...{
    <% validation.forEach(col => { -%>
        <%- col.name %> : <%- stringifyObject(buildValidationArgumentsFromObject(col.baseColumn,true)) %>,
    <% }); %>
    },
};
<% } %>
